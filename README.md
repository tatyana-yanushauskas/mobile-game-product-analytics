# Продуктовая аналитика мобильной игры

**Заказчик:** Студия-разработчик мобильных игр (NDA).  
**Задача:** Провести комплексный анализ игровых метрик, монетизации и поведения игроков для увеличения дохода и удержания аудитории.  
**Срок:** 2 недели.  
**Стек:** PostgreSQL, оконные функции, CTE, джойны по диапазону дат.

## Результат

1.  **Диагностика продукта:** Рассчитаны ключевые метрики (DAU, WAU, MAU, Sticky Factor), выявлены аномалии в данных.
2.  **Анализ монетизации:** Построена динамика выручки по типам товаров, оценено влияние изменения цен на поведение игроков.
3.  **Сегментация игроков:** Определены «лояльные» сегменты (по тратам и приглашениям), проанализировано их поведение.
4.  **Оценка вирусности:** Рассчитан K-factor игры (0.15), спрогнозирован прирост аудитории за счёт реферальной системы.
5.  **Проверка гипотез:** Оценена эффективность нового канала привлечения (ноябрь-декабрь 2022) — игроки показали на 23% большую вовлечённость.

## Ключевой запрос: анализ вирусности (K-factor)

```sql
/* Расчёт K-factor — показателя вирусности игры */
WITH referrals_agg AS (
    SELECT
        COUNT(DISTINCT u.id_user) AS total_users,
        SUM(COALESCE(r.ref_reg, 0)) AS total_registrations
    FROM skygame.users u
    LEFT JOIN skygame.referral r 
        ON u.id_user = r.id_user
)
SELECT 
    total_registrations::FLOAT / NULLIF(total_users, 0) AS k_factor
FROM referrals_agg;
